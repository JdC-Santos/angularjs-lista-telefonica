<div ng-include="'./view/header.html'"></div>
<div class="container">
  
  <!-- TABELA -->
  <div class="row mb-3">
    <div class="col-md-8 offset-md-2">

      <div class="text-center mt-3">
        <h3>Tabela de  Contatos</h3>
      </div>

      <ui-accordions>
        
        <ui-accordion title="Accordion 1">
          Maecenas lacinia enim urna, sed posuere turpis scelerisque vestibulum.
          Quisque mattis lacus sit amet est lobortis consectetur.
          Nullam et posuere massa, quis mattis dolor.
          Ut volutpat magna vel ligula finibus, vitae imperdiet dui commodo.
        </ui-accordion>

        <ui-accordion title="Accordion 2">
          Maecenas lacinia enim urna, sed posuere turpis scelerisque vestibulum.
          Quisque mattis lacus sit amet est lobortis consectetur.
          Nullam et posuere massa, quis mattis dolor.
          Ut volutpat magna vel ligula finibus, vitae imperdiet dui commodo.
        </ui-accordion>

        <ui-accordion title="Accordion 3">
          Maecenas lacinia enim urna, sed posuere turpis scelerisque vestibulum.
          Quisque mattis lacus sit amet est lobortis consectetur.
          Nullam et posuere massa, quis mattis dolor.
          Ut volutpat magna vel ligula finibus, vitae imperdiet dui commodo.
        </ui-accordion>

        <ui-accordion title="Accordion 4">
          Maecenas lacinia enim urna, sed posuere turpis scelerisque vestibulum.
          Quisque mattis lacus sit amet est lobortis consectetur.
          Nullam et posuere massa, quis mattis dolor.
          Ut volutpat magna vel ligula finibus, vitae imperdiet dui commodo.
        </ui-accordion>

      </ui-accordions>

      <ui-alert title='Ops, ocorreu um erro:' ng-show="message.length">
        {{ message }}
      </ui-alert>
      
      <!-- CAMPO DE BUSCA -->
      <input 
        type="text" 
        class="form-control"
        placeholder="O que voce está buscando?"
        ng-model="busca"
        ng-model-options="{updateOn: 'default blur', debounce: {default:500, blue:0}}"
      >

      <table ng-show="contatos.length" class="table table-striped text-center">
        <thead>
          <tr>
            <th></th>
            <th>Serial</th>
            <th><a href=""ng-click="ordenarPor('nome')">Nome</a></th>
            <th><a href="" ng-click="ordenarPor('telefone')">Telefone</a></th>
            <th>Operadora</th>
            <th>Preço</th>
            <th>Data</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr 
            ng-class="{'bg-warning': contato.selecionado }"
            ng-repeat="
              contato in contatos 
              | filter: busca 
              | orderBy: criterioDeOrdenacao: direcaoOrdenacao 
              track by contato.id"
          >
            <td>
              <input
                type="checkbox" 
                ng-model="contato.selecionado"
                ng-change="verificarContatoSelecionado(contatos)"
              >
            </td>
            <td>{{::contato.serial }}</td>
            <td>
              <a href="#!/detalhes-contato/{{ contato.id }}">
                {{ contato.nome | name }}
              </a>
            </td>
            <td>{{::contato.telefone }}</td>
            <td>{{::contato.operadora.nome | lowercase }}</td>
            <td>{{::contato.operadora.precoComImposto | currency }}</td>
            <td>{{::contato.data | date:'dd/MM/yyyy HH:mm' }}</td>
            <td>
              <div 
                style="width:20px; height: 20px;" 
                ng-style="{'background-color': contato.cor}"
                ng-hide="contato.selecionado"
                >
                </div>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- BOTÃO: REMOVER -->
      <div class="row mb-3 text-right">
        <div class="col-12 mx-auto">
          <button 
            class="btn btn-danger" 
            ng-click="apagarContatos(contatos)"
            ng-if="hasContatoSelecionado"
            >Remover</button>
        </div>
      </div>

      <a href="#!/novo-contato" class="btn btn-info">Novo Contato</a>
      <button class="btn btn-warning" ng-click="reset()">Reset</button>
    </div>
  </div>
</div>