<div ng-include="'./view/header.html'"></div>

<!-- FORM -->
<div class="container">
  <div class="col-md-4 offset-md-4 mt-3">
  
    <div class="text-center">
      <h3>Cadastrar Contato</h3>
    </div>
    <form name="contatoForm">
  
      <!-- INPUT: NOME -->
      <div class="row mb-3">
        <div class="col-sm-12">
          <input 
            type="text"
            name="nome"
            class="form-control" 
            placeholder="Nome"
            ng-model="contato.nome"
            ng-minlength="2"
            ng-maxlength="20"
            ng-required="true"
          >
        </div>
      </div>
  
      <!-- INPUT: TELEFONE -->
      <div class="row mb-3">
        <div class="col-sm-12">
          <input 
            type="text"
            name="telefone"
            class="form-control"
            placeholder="Telefone"
            ng-model="contato.telefone"
            ng-minlength="8"
            ng-maxlength="9"
            ng-pattern="/^\d{4,5}-\d{4}$/"
            ng-required="true"
          >
        </div>
      </div>
      
      <!-- INPUT: DATA -->
      <div class="row mb-3">
        <div class="col-sm-12">
          <input 
            type="text"
            name="data"
            class="form-control"
            placeholder="dd/mm/yyyy"
            ng-model="contato.data"
            ng-required="true"
            ui-date
          >
        </div>
      </div>
  
      <!-- SELECT: OPERADORA -->
      <div class="row mb-3">
        <div class="col-sm-12">
          <select 
            class="form-control"
            ng-model="contato.operadora" 
            ng-options="operadora.nome +' ( '+(operadora.preco | currency)+' )' for operadora in operadoras | orderBy: 'nome'"
          >
            <option value="">Selecione uma Operadora</option>
          </select>
        </div>
      </div>
  
      <!-- ERROS: NOME -->
      <div
        ng-if="contatoForm.nome.$error.length" 
        ng-messages="contatoForm.nome.$error" 
        class="alert alert-danger"
        role="alert">
        <!-- NOME - MSG ERRO: REQUIRED -->
        <div ng-message="required">
          Por favor, preencha o nome!
        </div>
  
        <!-- NOME - MSG ERRO: MINLENGTH (2) -->
        <div ng-show="minlength" >
          O nome deve ter pelo menos 2 caracteres
        </div>
      </div>
    
      <!-- TELEFONE - MSG ERRO: REQUIRED -->
      <div
        ng-show="contatoForm.telefone.$error.required && contatoForm.telefone.$dirty"
        class="alert alert-danger"
        role="alert"
      >
        Por favor, preencha o telefone!
      </div>
  
      <!-- TELEFONE - MSG ERRO: PATTERN -->
      <div
        ng-show="contatoForm.telefone.$error.pattern"
        class="alert alert-danger"
        role="alert"
      >
        O campo telefone deve ter o formato XXXXX-XXXX
      </div>
  
      <!-- BOTÃO: SALVAR -->
      <div class="row mb-3">
        <div class="d-grid gap-0 col-12 mx-auto">
          <button 
            class="btn btn-success" 
            ng-click="adicionarContato(contato)"
            ng-disabled="contatoForm.$invalid"
            >Salvar</button>
        </div>
      </div>
  
      <!-- BOTÃO: REMOVER -->
      <div class="row mb-3">
        <div class="d-grid gap-0 col-12 mx-auto">
          <button 
            class="btn btn-danger" 
            ng-click="apagarContatos(contatos)"
            ng-if="isContatoSelecionado(contatos)"
            >Remover</button>
        </div>
      </div>
    </form>
    <a href="#!/contatos" class="btn btn-info"> Lista de contatos</a>
  </div>
</div>
